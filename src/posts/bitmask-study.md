## 1. 개요

알고리즘 스터디 도중 배운 비트마스킹에 대한 내용을 정리해보고자 한다. 비트마스킹은 C++을 사용하여 구현해보려 한다.

### 비트마스킹 관련 좋은 문제

**백준**: https://www.acmicpc.net/problem/11723

## 2. 비트마스킹이란?

2진수 표기법의 특징을 활용한 알고리즘이다. 주로 정수의 이진수 표현법을 사용하는 알고리즘으로 더 빠른 시간, 더 간결한 코드, 더 적은 메모리 사용으로 집합을 구현할 수 있다. 

다만, 비트 연산에 대해 모를 경우 코드를 읽기가 정말 어렵다.

### 2-1. 비트마스킹 연산의 종류

비트마스킹 연산에는 비트 연산자가 가장 많이 들어간다.

| 연산 종류 | 연산 이름 | 연산 설명 |
|:---:|:---:|:---|
| `a & b = c` | AND 연산 | a와 b를 연산하여 비트가 둘 다 켜져 있는 경우에만 해당하는 c의 비트를 킨다. |
| `a \| b = c` | OR 연산 | 비트가 둘 중 하나라도 켜져 있는 경우 c의 비트를 켠다. |
| `a ^ b = c` | XOR 연산 | 둘 중 하나만 켜져 있을 경우 해당하는 c의 비트를 킨다. |
| `c = ~a` | NOT 연산 | 켜져 있는 비트는 끄고, 꺼져 있는 비트는 켠다. |
| `c = (a << 1)` 또는 `c = (a >> 1)` | 시프트 연산 | 비트들을 왼쪽 혹은 오른쪽으로 이동시킨다. |

비트 연산자를 활용할 때는, 주의할 점 또한 존재한다.

- **비트 연산자의 우선순위는 비교 연산자보다 낮다.** (예: C)
- **오버플로우를 조심해야 한다.**

시프트 연산을 사용할 경우, 오버플로우가 발생할 확률이 매우 높다. 이를 조심해야 한다.

### 2-2. 비트마스킹을 이용한 집합의 구현

예시로 든 백준 문제가 집합 문제이고, 실제로 벡터로 구현했을 경우 조금만 잘못하면 바로 시간 초과 오류가 뜬다. 이를 생각하면서 사용해야 한다.

백준 문제를 예시로 들어, C++로 코드를 작성해봤다.

#### C++ 코드

```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    // 입출력시간 조정
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    cout.tie(NULL);
    
    int M;
    cin >> M;
    
    int bit = 0, temp;
    string s;
    
    while(M--) {
        cin >> s;
        if(s == "add") {
            cin >> temp;
            bit |= (1 << temp);
            // OR 연산자로, temp 자리에 1이 들어가도록 한다.
        } else if(s == "remove") {
            cin >> temp;
            bit &= ~(1 << temp);
            // NOT 연산자로 temp 자리에 0이 들어가도록 한다.
        } else if(s == "check") {
            cin >> temp;
            if (bit & (1 << temp))
                cout << 1 << "\n";
            else
                cout << 0 << "\n";
            // AND 연산자로 해당 숫자가 존재하는지 조회한다.
        } else if(s == "toggle") {
            cin >> temp;
            bit ^= (1 << temp);
            // XOR 연산자로 바꾸어준다.
        } else if(s == "all") {
            bit = (1 << 21) - 1;
            // 20까지의 모든 수를 1로 채운다.
        } else if(s == "empty") {
            bit = 0;
            // 초기화
        }
    }
    return 0;
}
```

> **참고**: C++ 입출력시간 조정 안해주면 시간초과 난다.

