## 소수점 오류

자바스크립트를 주로 다루는 프론트 개발자라면 흔히들 알고 있는 사실이지만, 실제로 운영에서 발생하면 보통 정신이 나간다. 이상이 없어 보이는 로직인데, 특수한 상황에 처할 때마다 이상이 발생한다.

## 발생 원인

쿠폰의 할인률을 받아 할인 금액을 프론트 단에 띄워주는 로직이 존재한다. 보통 할인 쿠폰은 50%, 60% 등의 할인율을 통해 할인 금액을 계산하지만, 이번에는 55%라는 퍼센트의 쿠폰이 들어왔다.

![50% 할인 쿠폰](https://velog.velcdn.com/images/honggilgim/post/1b6fcc5c-61c7-43b6-b39c-dad6c90496c8/image.png)

20만원의 금액을 50%의 할인 쿠폰으로 할 경우, 10만원이 할인된다. 이런 로직에 오류가 생길 거라고 여기는 사람은 없다.

![65% 할인 쿠폰](https://velog.velcdn.com/images/honggilgim/post/f2a1b366-3c83-4679-8c0b-2d83682c7cf5/image.png)

그리고 20만원의 금액에 65%의 할인 금액을 넣을 경우 13만원이 할인된다. 즉 65%라는 애매한 값에도 딱히 문제가 없다. 하지만,

![55% 할인 쿠폰](https://velog.velcdn.com/images/honggilgim/post/b4a923a4-36a3-46e7-9567-3e8f7f2757e8/image.png)

55%라는 쿠폰 할인 비율을 적용할 경우, 뒤쪽에 이상한 소수점이 붙은 값이 출력된다. 이 부분 때문에 로직에 오류가 발생했다.

### JavaScript의 경우

JavaScript는 IEEE 754 표준을 따르는 **64비트 부동 소수점 형식을 사용하여 소수 값을 표현한다.** 이 부동 소수점 방식은 **고정 소수점 방식에 비해 훨씬 많은 소수를 표현할 수 있지만, 항상 오차를 포함한다.** 자바스크립트 뿐 아니라 **모든 언어에서 발생하는 문제**이다.

## (CS) 고정소수점과 부동소수점 방식

컴퓨터는 실수를 표현하기 위해 고정소수점 방식과 부동소수점 방식이라는 두 가지 방식을 사용한다.

### 고정소수점 방식

고정소수점 방식은, 간단하게 비트를 나누어 정수 부분의 표현과 실수 부분의 표현을 나누어 표현하는 방식이다. 이렇게 표현할 경우 정확하게 표현할 수 있지만, 많은 자리수를 표시할 수 없기에 표현할 수 있는 숫자의 수에 한계가 있다는 단점이 존재한다.

### 부동소수점 방식

부동소수점 방식은 소수점을 나타내는 위치를 변경할 수 있는 표현 방식이다. 이렇게 표현할 경우 항상 오차가 존재하지만, 더욱 많은 숫자를 표현할 수 있다. 대다수의 컴퓨터 표현 방식에서는 이 부동 소수점 방식을 채택하여 사용하고 있다.

